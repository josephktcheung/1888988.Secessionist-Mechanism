# 归并国机制重新设计提案

## 摘要

本文档提议对《欧陆风云 V》中的归并国机制进行完全重新设计。当前系统存在根本性缺陷，导致游戏破坏性漏洞并破坏战略决策制定。本提案概述了重新设计系统的设计原则，该系统平衡归并国战争与传统外交，恢复玩家控制，并保持游戏平衡。

**核心原则：** 归并国参与应该是**可选的**和**战略性的**，而非强制。国家应该能够在承诺参战之前评估成本和收益，允许玩家基于预期收益与潜在成本做出明智的战略决策。

**注意：** 这是供 Paradox 考虑的设计提案。它专注于设计原则和概念，而非技术实现细节，因为完全重新设计需要对当前系统进行根本性改变。

---

## 问题陈述

当前归并国机制存在十二个严重问题，从根本上破坏了游戏体验：

1. **同文化国家被迫加入（最严重）** - 强制参战，无拒绝选项。**关键缺陷：完全忽略原始所有者** - 系统仅考虑文化主导地位，忽略历史所有权。示例：在拜占庭案例中，奥斯曼（叛乱领土的原始所有者）被完全忽略，而选择埃雷特纳（文化主导但非原始所有者）。原始所有者没有机会收回其前领土。

2. **联合统治破裂（严重 - 已验证）** - 当联合统治邦联从属国是归并国叛乱的文化主导国家时，它被强制召唤支持叛乱对抗其邦联主导国，立即打破联合统治。已验证：当西西里叛军出现时，法兰西-西西里联合统治破裂。

3. **附庸战争领导权问题（严重）** - 如果玩家创建的附庸在内战中成为防御方，玩家被强制拖入战争但不会成为战争领袖。AI 附庸控制所有和平谈判。玩家无法召唤同盟，无法获得军事通行权，必须承担所有战争成本而无法控制。

4. **同盟自动召唤不一致** - 当玩家是防御方战争领袖时，可以请求同盟加入。但当附庸是防御方战争领袖时，玩家无法召唤同盟加入。

5. **包围网绕过机制（严重利用）** - 当被强制召唤的国家在包围网中时，它无法召唤包围网成员加入战争，因为它是进攻方。这允许防御方绕过包围网限制并单独攻击包围网成员。

6. **AI 附庸次优和平决策** - AI 附庸可能选择白和平而非吞并叛乱者，即使吞并成本很低，导致玩家失去本应获得的领土。

7. **宗主国被迫加入** - 归并国通过属国类型属性自动强制召唤宗主国参战。

8. **停战协议违反惩罚** - 拥有停战协议的被强制召唤国家被错误地判定为主动违反停战协议，触发严重惩罚（-50 稳定度，+1 厌战度，+25 敌意），即使它们别无选择。

9. **世界大战升级 - 不对称同盟召唤（严重）** - 由于不对称同盟召唤机制，单个本地归并国叛乱可能升级为世界大战。防御方可以召唤其所有同盟，而被强制召唤的进攻方无法召唤自己的同盟，创造了危险的升级机制，防御方可以系统性地使用归并国叛乱不对称地攻击敌人的同盟集团。这创造了一个不平衡的游戏机制，一方可以协调而另一方不能。

10. **吞并叛军按钮误用于战争参与国家（严重 - 游戏破坏性）** - 当归并国叛乱以群众集会（无领土的无地国家）形式生成时，叛军国家没有领土。当叛军国家的军队被消灭且叛乱被消除时，战争继续，战争参与国家成为战争领袖。设计用于吞并整个叛乱者国家的吞并叛军按钮，然后可用于吞并整个战争参与国家（例如，法兰西 - 游戏开始时第三大国家），且不产生敌意。**已验证示例：** 法兰西被英格兰吞并；札剌亦儿被奥斯曼吞并。

11. **属国被迫支持遥远叛乱（严重）** - 任何恰好是叛乱文化文化主导的属国（例如，附庸、归并国属国或其他属国类型）被强制召唤支持同一文化的遥远叛乱，即使它们相距数千公里且与叛乱没有逻辑联系。**已验证示例：** 元案例 - 蒙古地区的小型蒙古属国被迫支持格鲁吉亚 6000+ 公里外的叛乱。

12. **有地归并国叛乱与无地归并国叛乱行为不一致（严重）** - 当归并国叛乱生成时，其行为根据它是有地（拥有领土）还是无地（无领土的群众集会）而显著不同。有地归并国在获胜时成为文化主导国家的附庸，而无地归并国成为独立国家，文化主导国家没有奖励。AI 文化主导国家即使在 100% 战争分数时也可能不占领任何土地，只接受战争赔款。**已验证示例：** 英格兰 vs 法兰西案例 - 法兰西进行了整场战争，仅获得最小战争赔款（314-350 杜卡特），无领土或附庸。

**根本原因：** 当前系统使用硬编码引擎逻辑，在没有玩家控制的情况下强制召唤文化主导国家进入归并国战争，忽略原始所有权，并创建不对称升级机制。这些行为中的许多无法仅通过游戏脚本修改，需要完全重新设计。

---

## 战争宣言系统失衡与战略控制问题

### 两种战争宣言系统

EU5 目前有两个并行的战争宣言系统，具有根本不同的成本、约束和玩家控制：

**传统战争宣言系统：**
- 需要建立间谍网（消耗资源）
- 需要创建宣战理由（需要时间，消耗资源）
- 需要外交官（外交容量）
- 玩家对时机和目标有完全控制
- 同盟可以拒绝召唤
- 尊重停战协议、保证和同盟
- 有外交行动冷却时间

**归并国内战系统：**
- 当归并国叛军达到 100% 进度时自动触发
- 不需要间谍网
- 不需要宣战理由
- 不需要外交官
- 无玩家控制 - 自动发生
- 无法拒绝 - 同文化国家被强制召唤
- 绕过停战协议、保证和同盟
- 无冷却时间 - 可以在前一场战争后立即发生

### 根本性失衡

归并国系统创建了传统外交的不对称绕过：

1. **无资源成本：** 传统战争需要间谍网投资、外交官和时间。归并国战争不需要这些。

2. **无外交约束：** 传统战争尊重停战协议、保证和同盟。归并国战争绕过所有这些。

3. **强制参与：** 传统战争允许拒绝。归并国战争强制参与，无选择。

4. **不可预测的时机：** 传统战争由玩家控制。归并国战争是自动且不可预测的。

5. **可被利用的性质：** 该系统使玩家能够在停战协议期间强制对手参战、绕过包围网限制，并将宗主国用作武器的系统性利用成为可能。

### 游戏设计与平衡问题

当前强制参与系统创建了根本性的游戏设计和平衡问题：

**游戏平衡问题：**
- **强制参与移除战略选择：** 系统强制国家进入战争，不允许玩家评估成本和收益。这从游戏中移除了核心战略决策制定元素。
- **无成本效益分析：** 玩家在被强制参战之前无法评估参与是否值得。这破坏了玩家应该能够做出明智决策的战略游戏玩法。
- **不对称游戏机制：** 强制参与机制创建了传统外交系统的不对称绕过，允许玩家利用系统在停战协议期间强制对手进入战争，绕过包围网限制，并将宗主国用作武器。
- **当前系统问题：** 强制参与机制在整个 500 年游戏期间（从 1337 年到 1837 年）应用相同的强制文化团结逻辑。这移除了战略决策制定，并无论时间如何都创造了游戏破坏性利用。

**成本效益分析：**
- 即使文化主导国家可能同情归并国，它们也不会自动加入战争，除非收益证明成本合理
- 国家优先考虑整个国家的集体利益，而非居住在外国领土上的相对较小的同文化公民群体
- 国家会评估：(1) 预期附庸规模和价值，(2) 潜在战争成本（人力、杜卡特、厌战度），(3) 升级风险（防御方的同盟、包围网成员），(4) 为最小收益而将资源投入可能长期战争的机会成本

**战争持续时间风险：**
- 归并国战争可能持续数年，收益微薄，使强制参与更加不合理
- 后期复杂性：在多个大陆存在的大国使归并国战争变得风险高且难以证明合理，即使对于大型附庸也是如此
- 当前系统强制国家进行基于成本效益分析会理性拒绝的战争

**战略合理性：**
- 当前系统通过强制参与而不允许成本效益评估来破坏战略决策制定
- 玩家无法就参与是否值得做出明智决定
- 这违反了核心战略游戏原则，玩家应该能够控制其国家的外交政策决策

### 战略决策制定问题

**无地叛军几乎无收益：**
- 无地叛军（群众集会）仅提供 314-350 杜卡特的战争赔款，无有用附庸，无领土
- 没有合理的玩家会想为这种最小收益而进行重大战争
- **建议：** 将无地叛军完全排除在归并国机制之外 - 它们应使用标准叛军机制

**战前未知收益：**
- 玩家无法在参与前评估收益：
  - 直到战争爆发才知附庸规模（领土、人口）
  - 未知战争赔款金额（AI 归并国会分走一部分）
  - 未知战争成本（特别是后期当大国在多个大陆存在时）
  - 当战争可能涉及大国时，即使附庸规模很大，也难以证明参与合理

**成本效益分析不可能：**
- 玩家在被强制参战前无法进行理性成本效益分析：
  - 无法比较预期附庸价值与潜在战争成本（人力、杜卡特、厌战度）
  - 无法评估升级风险（防御方的同盟、包围网成员、军事实力）
  - 无法评估为最小收益而将资源投入可能长期战争的机会成本
  - 无法优先考虑集体国家利益而非外国领土上的小文化少数群体
  - **游戏设计问题：** 强制参与从玩家中移除了战略决策制定。玩家应该能够评估支持归并国叛乱是否在战略上值得，基于预期收益与潜在成本，无论时间如何。当前系统强制参与而不允许此评估，破坏了核心战略游戏玩法。

**无法拒绝参与：**
- 玩家被强制进入收益未知或微薄的战争
- 对参与决策无战略控制

**AI 战争领袖控制：**
- 当附庸是战争领袖时，玩家无法控制战争持续时间、和平谈判或战争何时结束
- 玩家失去对战争结果的所有战略控制

---

## 提议的重新设计原则

### 核心设计原则

1. **可选参与：** 归并国参与必须是可选的，而非强制。国家应该能够拒绝而不受惩罚。

2. **战略决策制定：** 玩家必须能够在承诺参与之前评估成本和收益。这需要：
   - 早期预警系统（当叛军达到 80-90% 进度时通知）
   - 收益预览显示预期附庸规模、战争赔款和战争成本
   - 风险评估显示防御方的同盟、包围网成员和军事实力
   - 成本效益分析帮助玩家决定参与是否值得

3. **战略决策制定：** 系统必须支持战略游戏玩法：
   - 玩家在决定是否参与时应优先考虑战略和经济收益
   - 战争应基于成本效益分析而战，而非由自动文化联系强制
   - 玩家必须能够在承诺参与之前评估预期收益与潜在成本

4. **原始所有者优先：** 当两者都存在时，原始所有者应优先于文化主导国家。原始所有权提供了比仅文化主导地位更强的战略参与理由，因为原始所有者对其前领土有直接领土主张和战略利益。

5. **与传统外交平衡：** 归并国战争应具有与传统战争宣言系统一致的适当成本和约束：
   - 需要资源投资（例如，间谍网或杜卡特）
   - 尊重外交约束（允许拒绝，在可能时尊重停战协议）
   - 提供玩家对时机和参与的控制

6. **排除无地叛军：** 无地叛军（群众集会）几乎无收益，应完全排除在归并国机制之外。它们应使用标准叛军机制。

7. **玩家战争领袖控制：** 文化主导国家（或原始所有者）应成为战争领袖，而非附庸，给予玩家对和平谈判和战争持续时间的完全控制。

8. **防止利用：** 系统必须防止系统性利用：
   - 在停战协议期间不强制参与
   - 不绕过包围网限制
   - 不使用宗主国作为武器
   - 不强制属国进入遥远战争

### 提议的解决方案框架

**早期预警与收益预览系统：**
- 当归并国叛军达到 80-90% 进度时，符合条件的国家会收到通知
- 通知包括收益预览：
  - 预期附庸规模（领土、人口、军事实力）
  - 预期战争赔款（AI 归并国会分走一部分）
  - 潜在战争成本（人力、杜卡特、厌战度）
  - 风险评估（防御方的同盟、包围网成员、军事实力）
  - 成本效益分析帮助玩家决定参与是否值得

**资源投资的可选参与：**
- 国家可以选择通过投资资源（例如，间谍网或杜卡特）来支持归并国
- 此投资授予在内战爆发时加入的权利
- 国家可以拒绝而不受惩罚
- 资源投资使归并国战争与传统外交成本保持一致

**替代解决方案：支持叛军隐蔽行动要求（更简单的实现）**
- **关键改变：** 归并国内战仅在原始所有者或文化突出国家主动对目标国家使用支持叛军隐蔽行动时触发
- **机制：** 当国家使用支持叛军隐蔽行动支持另一个国家的归并国叛军时，这创建了一个"支持承诺"，当归并国叛乱爆发时，这证明召唤该国家参战是合理的
- **战略决策：** 支持国家通过隐蔽行动做出支持叛乱的战略决策，使其参与合理且自愿
- **关键要求：收益预览系统：** 游戏必须在玩家考虑对归并国叛军使用支持叛军隐蔽行动时提供清晰的收益预览信息：
  - **潜在归并国人口规模** - 显示目标国家中叛乱文化的总人口
  - **地点/省份数量** - 显示归并国叛乱可能控制的领土数量
  - **预期附庸规模和价值** - 估计如果叛乱成功将获得的附庸规模和军事实力
  - **成本效益分析** - 比较预期收益与成本（间谍网投资、潜在战争成本、升级风险）
  - **为什么这是必需的：** 没有清晰的收益预览，玩家无法证明在 EU5 中有其他方式发动战争时（传统宣战理由、外交官等）使用支持叛军隐蔽行动支持归并国是合理的。如果玩家无法评估潜在附庸是否值得投资，该机制将很少被使用。
- **收益：**
  - 消除强制参与 - 只有选择通过隐蔽行动支持的国家被召唤
  - 需要资源投资（隐蔽行动需要间谍网）
  - 与传统外交系统保持一致（隐蔽行动需要间谍网）
  - 提供玩家控制 - 玩家在战争爆发前决定是否支持叛军
  - 使参与具有战略性 - 玩家在使用隐蔽行动之前评估成本和收益
  - 实现明智决策 - 收益预览允许玩家证明投资的合理性
- **实现：**
  - 修改归并国召唤机制，仅召唤与目标国家中的叛军有活跃支持叛军关系的国家
  - 在针对归并国叛军时，向支持叛军隐蔽行动添加收益预览 UI/工具提示，显示潜在归并国人口规模、领土数量和预期附庸价值

**优先级系统：**
- 原始所有者获得最高优先级（如果它们仍然存在）
- 文化主导国家获得次要优先级
- 防御方的宿敌也可以参与（成本更高）
- 属国被排除在参与之外，以防止与宗主国冲突

**战争领导权：**
- 如果主要文化国家（或原始所有者）支持叛乱，它们在内战爆发时成为战争领袖
- 这给予玩家对和平谈判和战争持续时间的完全控制
- 防止 AI 附庸控制战争

**排除无地叛军：**
- 无地叛军（群众集会）被排除在归并国机制之外
- 它们使用标准叛军机制
- 这防止了为最小收益（314-350 杜卡特）而进行的战争

**平衡升级：**
- 双方都可以与同盟协调
- 无不对称同盟召唤
- 通过防止强制参与来防止世界大战升级

---

## 设计考虑

### 游戏平衡与战略游戏玩法

重新设计的系统必须保持游戏平衡并支持战略游戏玩法：
- 玩家应在承诺参战之前评估成本和收益
- 参与应基于战略考虑（预期附庸价值、战争成本、升级风险），而非由自动文化联系强制
- 外国领土上的小文化少数群体不应自动触发重大战争，除非玩家基于战略评估选择支持它们

### 战略游戏玩法

重新设计的系统必须支持战略决策制定：
- 玩家需要信息以做出明智决定
- 在参与之前必须能够进行成本效益分析
- 玩家应该对其国家的外交政策有控制权
- 战争应该为战略原因而战，而非由游戏机制强制

### 平衡与防止利用

重新设计的系统必须防止系统性利用：
- 在停战协议期间不强制参与
- 不绕过包围网限制
- 不使用宗主国作为武器
- 不强制属国进入遥远战争
- 不利用无地叛军吞并大国

### 与现有系统集成

重新设计的系统必须与现有 EU5 机制集成：
- 与传统外交系统成本保持一致
- 在适当情况下尊重外交约束
- 在防止利用的同时保持独特的归并国特色
- 与现有同盟、包围网和属国系统配合工作

---

## 基本快速修复（热修复）

虽然建议完全重新设计，但以下基本快速修复可以解决最关键的利用，而无需完整的系统重新设计：

### 热修复 1：修复吞并叛军按钮利用（问题 10 - 关键）

**问题：** 吞并叛军按钮可用于吞并战争参与国家（例如，法兰西），而不仅仅是实际叛乱者国家，允许以 25% 成本且无敌意吞并大国。

**快速修复：** 添加验证检查，确保目标国家实际上是叛乱者，然后才允许吞并叛军选项：
- 验证目标是发起战争的原始叛乱者
- 或验证目标有叛乱者标志/变量或是叛军国家类型
- 对不是实际叛乱者的战争参与国家禁用该选项

**替代修复：** 如果吞并叛军用于非叛乱者，应用正常吞并成本（100% 而非 25%）并产生适当的敌意。

**影响：** 防止游戏破坏性利用，其中大国可以以最小成本被吞并。

### 热修复 2：从归并国机制中排除无地叛军（问题 12）

**问题：** 无地归并国（群众集会）创建归并国战争，但几乎无收益（仅 314-350 杜卡特），并在被消灭时启用吞并叛军利用。

**快速修复：** 完全从归并国机制中排除无地归并国：
- 当归并国叛军达到 100% 进度时，检查叛乱是否会生成为 `country_type = pop`（群众集会）
- 如果无地，使用标准叛军机制而非归并国内战机制
- 不为无地叛军创建归并国内战

**影响：** 防止为最小收益而进行的战争，并消除吞并叛军利用的根本原因。

### 热修复 3：从归并国召唤中排除属国（问题 11）

**问题：** 恰好是叛乱文化文化主导的属国（例如，附庸、归并国属国）被强制召唤支持遥远叛乱，即使相距数千公里。

**快速修复：** 从归并国召唤中排除所有属国：
- 在归并国召唤机制中添加检查：`is_subject = no`
- 这应与附庸和采邑已被排除的方式一致（在问题 2 测试中已验证）

**影响：** 防止属国被拖入遥远战争，并防止与宗主国冲突。

### 热修复 4：从归并国召唤中排除联合统治（问题 2）

**问题：** 联合统治邦联从属国被强制召唤，立即打破联合统治。

**快速修复：** 从归并国召唤中排除联合统治邦联从属国（与附庸和采邑相同）：
- 添加检查：`NOT = { is_subject_of_type = subject_type:personal_union }` 或类似
- 确保与其他属国类型排除的一致性

**影响：** 防止联合统治意外破裂。

### 热修复 5：修复停战协议违反惩罚（问题 8）

**问题：** 拥有停战协议的被强制召唤国家被错误地判定为主动违反停战协议，触发严重惩罚（-50 稳定度，+1 厌战度，+25 敌意），即使它们别无选择。这也可以通过在停战协议期间故意触发归并国叛乱来利用，以对对手造成伤害。

**快速修复：** 当归并国选择其支持国家时，跳过与防御方有活跃停战协议的同文化国家：
- 在归并国召唤机制中添加检查：`NOT = { has_truce_with = $defender$ }`
- 如果不存在符合条件的国家（所有都有停战协议），归并国叛乱在没有外部支持的情况下进行
- 这完全防止了利用，并避免了对别无选择的国家的不公平惩罚

**影响：** 防止对别无选择的国家的不公平惩罚，并防止玩家可以在停战协议期间强制对手进入战争的利用。

### 实施优先级

**阶段 1（关键 - 立即）：**
- 热修复 1：修复吞并叛军利用（防止游戏破坏性利用）
- 热修复 2：排除无地叛军（防止利用的根本原因）

**阶段 2（高优先级）：**
- 热修复 3：排除属国（防止遥远战争参与）
- 热修复 4：排除联合统治（防止联合破裂）

**阶段 3（中等优先级）：**
- 热修复 5：修复停战协议违反惩罚（公平性修复）

**注意：** 这些热修复解决了最关键的利用，但并未解决根本设计问题（强制参与、缺乏战略控制等）。仍建议完全重新设计作为长期解决方案。

### 热修复 6：支持叛军隐蔽行动要求（替代解决方案）

**问题：** 当前系统在没有事先战略决策或资源投资的情况下强制召唤国家进入归并国战争，移除玩家控制并创建利用。

**替代解决方案：** 要求支持叛军隐蔽行动，然后归并国内战才能召唤国家参战：
- **关键改变：** 归并国内战仅在它们主动对目标国家使用支持叛军隐蔽行动后才召唤国家参战，在叛乱爆发之前
- **机制：** 当国家使用支持叛军隐蔽行动支持另一个国家的归并国叛军时，这创建了一个"支持承诺"，当归并国叛乱爆发时，这证明召唤该国家参战是合理的
- **战略决策：** 支持国家通过隐蔽行动做出支持叛乱的战略决策，使其参与合理且自愿
- **关键要求：收益预览系统：** 游戏必须在玩家考虑对归并国叛军使用支持叛军隐蔽行动时提供清晰的收益预览信息：
  - **潜在归并国人口规模** - 显示目标国家中叛乱文化的总人口
  - **地点/省份数量** - 显示归并国叛乱可能控制的领土数量
  - **预期附庸规模和价值** - 估计如果叛乱成功将获得的附庸规模和军事实力
  - **成本效益分析** - 比较预期收益与成本（间谍网投资、潜在战争成本、升级风险）
  - **为什么这是必需的：** 没有清晰的收益预览，玩家无法证明在 EU5 中有其他方式发动战争时（传统宣战理由、外交官等）使用支持叛军隐蔽行动支持归并国是合理的。如果玩家无法评估潜在附庸是否值得投资，与替代战争宣言方法相比，该机制将很少被使用。
- **收益：**
  - 消除强制参与 - 只有选择通过隐蔽行动支持的国家被召唤
  - 需要资源投资（隐蔽行动需要间谍网）
  - 与传统外交系统保持一致（隐蔽行动需要间谍网）
  - 提供玩家控制 - 玩家在战争爆发前决定是否支持叛军
  - 使参与具有战略性 - 玩家在使用隐蔽行动之前评估成本和收益
  - 实现明智决策 - 收益预览允许玩家证明投资的合理性
- **实现：**
  - 修改归并国召唤机制，仅召唤与目标国家中的叛军有活跃支持叛军关系的国家
  - 在针对归并国叛军时，向支持叛军隐蔽行动添加收益预览 UI/工具提示，显示潜在归并国人口规模、领土数量和预期附庸价值

**影响：** 将归并国参与从强制转变为可选和战略性，解决核心设计问题，同时使用现有游戏系统（隐蔽行动）。但是，**收益预览是必需的** - 没有它，该机制可能很少被使用，因为玩家无法证明投资与替代战争宣言方法相比是合理的。

---

## 总结

当前归并国机制需要完全重新设计，而非补丁。根本问题源于强制参与、缺乏战略控制和游戏平衡问题。提议的重新设计原则专注于：

1. **可选参与**与战略决策制定
2. **战略游戏玩法**，玩家在承诺之前评估成本和收益
3. **与传统外交平衡**，通过适当的成本和约束
4. **排除无地叛军**，提供最小收益
5. **玩家控制**战争领导权和和平谈判
6. **防止利用**，通过适当的约束和可选参与

此重新设计将恢复战略游戏玩法，保持游戏平衡，并防止当前困扰归并国机制的系统性利用。该系统将成为战略选择而非强制机制，允许玩家基于成本效益分析和战略考虑做出明智决定。

**重要考虑：**
- 这是一个专注于原则和概念的设计提案
- 实施需要大量开发资源
- 实际有效性需要通过游戏测试验证
- Paradox 应与其他潜在的重新设计方法一起评估此提案
- 完全重新设计的复杂性必须与开发优先级平衡

---

### 关于为 Paradox 开发做贡献的说明

我有兴趣为 Paradox Interactive 的游戏开发做出贡献，并欢迎有机会讨论我的游戏机制设计分析方法如何对开发团队有价值。
